---
title: "Pythagorean Expectation Across Various Sports"
author: "David Teuscher"
date: '2022-07-30'
slug: pythagorean-model-in-sports
categories: []
tags: []
subtitle: ''
summary: 'This is the post summary'
authors: []
lastmod: '2022-07-30T19:13:34-06:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---



<div id="overview-of-pythagorean-expectation" class="section level1">
<h1>Overview of Pythagorean Expectation</h1>
<p>Pythagorean expectation is a formula that originated with Bill James in the early 1980s. The formula attempted to estimated the number of games a baseball team should have won in based on the number of runs scored and allowed. The basic formula is:
<span class="math display">\[\text{Win Percentage} = \frac{\text{Runs Scored}^2}{\text{Runs Scored}^2 + \text{Runs Allowed}^2} \]</span>
The Pythagorean winning percentage is often compared with a team’s actual winning percentage in baseball to identify teams that are underperforming or overperforming and whether or not a team’s performance is sustainable over the course of the season.</p>
<ul>
<li>Explain how prevalent this record is</li>
<li>Explain the exponent</li>
<li>Show how to derive log relationship to use with linear regression</li>
</ul>
</div>
<div id="pythagorean-exponent-for-different-sports" class="section level1">
<h1>Pythagorean Exponent For Different Sports</h1>
<ul>
<li>Explain that the exponent will be different for different sports
## MLB</li>
<li>Explain the baseball data and result</li>
<li>Compare to other results</li>
</ul>
<pre class="r"><code>library(Lahman)
mlb &lt;- Teams %&gt;% 
    filter(yearID &gt; 1900) %&gt;%
    select(teamID, yearID, lgID, G, W, L, R, RA) %&gt;%
    mutate(RD = R - RA, 
           Wpct = W / (W + L))

mlb_pyt &lt;- mlb %&gt;%
    mutate(log_w_ratio = log(W/L),
           log_r_ratio = log(R / RA))
pyt_fit &lt;- lm(log_w_ratio ~ -1 + log_r_ratio, data = mlb_pyt)
coef(pyt_fit)</code></pre>
<pre><code>## log_r_ratio 
##    1.853545</code></pre>
<div id="nhl" class="section level2">
<h2>NHL</h2>
<ul>
<li>Explain source of NHL data</li>
<li>Compare with other results</li>
</ul>
<pre class="r"><code>library(nhlapi)

nhl &lt;- nhl_standings(seasons = 1990:2022)
nhl_data &lt;- nhl$teamRecords %&gt;%
    bind_rows() %&gt;%
    mutate(point_diff = goalsScored - goalsAgainst,
           Win_pct = leagueRecord.wins/leagueRecord.losses,
           log_win_ratio = log(leagueRecord.wins/leagueRecord.losses),
           log_point_ratio = log(goalsScored/goalsAgainst))
pyt_fit_nhl &lt;- lm(log_win_ratio ~ -1 + log_point_ratio, data = nhl_data)
coef(pyt_fit_nhl)</code></pre>
<pre><code>## log_point_ratio 
##        2.359762</code></pre>
</div>
<div id="nfl" class="section level2">
<h2>NFL</h2>
<ul>
<li>Explain source of NFL data; log1p</li>
<li>Compare with other results</li>
</ul>
<pre class="r"><code>library(espnscrapeR)
library(purrr)
season &lt;- espnscrapeR::get_nfl_standings(season = 2002)

nfl_data &lt;- map_df(2002:2021, get_nfl_standings)

nfl_pyt &lt;- nfl_data %&gt;%
    mutate(log_w_ratio = log1p(wins) - log1p(losses),
           log_point_ratio = log(pts_for/pts_against))
pyt_fit &lt;- lm(log_w_ratio ~ -1 + log_point_ratio, data = nfl_pyt)
coef(pyt_fit)</code></pre>
<pre><code>## log_point_ratio 
##        2.396146</code></pre>
</div>
<div id="nba" class="section level2">
<h2>NBA</h2>
<ul>
<li>Explain source of NBA data</li>
<li>Compare with other results</li>
</ul>
<pre class="r"><code>library(hoopR)
nba_data &lt;- map_df(1994:2021, espn_nba_standings)
nba_data &lt;- nba_data %&gt;%
    mutate(wins = as.numeric(wins),
           losses = as.numeric(losses),
           avgpointsfor = as.numeric(avgpointsfor),
           avgpointsagainst = as.numeric(avgpointsagainst),
           games = wins + losses,
           points_for = games*avgpointsfor,
           points_against = games*avgpointsagainst,
           point_diff = points_for - points_against,
           log_w_ratio = log(wins/losses),
           log_point_ratio = log(points_for/points_against))
pyt_fit_nba &lt;- lm(log_w_ratio ~ -1 + log_point_ratio, data = nba_data)
coef(pyt_fit_nba)</code></pre>
<pre><code>## log_point_ratio 
##        14.08544</code></pre>
</div>
</div>
<div id="summary" class="section level1">
<h1>Summary</h1>
</div>
